From a64686583d046258617de998f85a9d755c7afea3 Mon Sep 17 00:00:00 2001
From: Jeremy Newton <Jeremy.Newton@amd.com>
Date: Fri, 30 Jun 2023 11:24:54 -0400
Subject: [PATCH 6/6] Only install asan license if enabled

Change-Id: I79c6fce84c23ed12e65db8e234a29dbfedd11f68
Signed-off-by: Jeremy Newton <Jeremy.Newton@amd.com>
---
 CMakeLists.txt | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index e97bdba..540955a 100755
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -262,9 +262,11 @@ install(EXPORT rocm_smiTargets
 #License file
 set(CPACK_RPM_PACKAGE_LICENSE "NCSA")
 # install license file in share/doc/rocm_smi-asan folder
-install(FILES ${CPACK_RESOURCE_FILE_LICENSE}
+if( ENABLE_ASAN_PACKAGING )
+  install(FILES ${CPACK_RESOURCE_FILE_LICENSE}
         DESTINATION ${CMAKE_INSTALL_DATADIR}/doc/${ROCM_SMI}-asan RENAME LICENSE.txt
         COMPONENT asan)
+endif()
 install( FILES ${CPACK_RESOURCE_FILE_LICENSE}
         DESTINATION ${CMAKE_INSTALL_DATADIR}/doc/${ROCM_SMI} RENAME LICENSE.txt
         COMPONENT dev)
-- 
2.40.1

